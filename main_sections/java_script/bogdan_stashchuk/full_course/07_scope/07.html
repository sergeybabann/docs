<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>07 Области видимости</title>
    <link rel="stylesheet" href="../../../../../css/normalize.css">
    <link rel="stylesheet" href="../../../../../css/vars.css">
    <link rel="stylesheet" href="../../../../../css/main.css">
    <link rel="stylesheet" href="../../../../../css/header.css">
    <link rel="stylesheet" href="../../../../../css/content.css">
    <link rel="stylesheet" href="../../../../../css/sidebar_1.css">
    <link rel="stylesheet" href="../../../../../css/sidebar_2.css">
    <link rel="stylesheet" href="../../../../../css/footer.css">
    <link rel="stylesheet" href="../../../../../css/templates.css">
</head>

<body>

    <div class="wrapper">
        <!----- HEADER ----->
        <div class="header general__area-1">
            <a name="HEADER"></a>
            <div class="header__space">
                <div class="header__descr">
                    <h1 class="header__h1">
                        Обучающий<br> курс
                    </h1>
                    <span class="header__descr-1">Полный курс JavaScript
                    </span>
                    <ul class="header__descr-2">
                        <li>Источник: rutracker</li>
                        <li>Автор: Богдан Сташчук</li>
                        <li>Спецификация: JavaScript</li>
                    </ul>
                </div><!--tutorial__descr-->
                <ul class="header__navmenu-list">
                    <li class="header__navmenu-item">
                        <a href="../../../../../index.html" class="header__navmenu-link">Главная страница сайта</a>
                    </li>
                    <li class="header__navmenu-item">
                        <a href="../../../javascript.html" class="header__navmenu-link">Курсы JavaScript</a>
                    </li>
                    <li class="header__navmenu-item">
                        <a href="../course.html" class="header__navmenu-link">Главная
                            страница курса</a>
                    </li>
                </ul>
            </div><!--header__space-->
        </div><!--header-->




        <!----- ASIDE-1 ----->
        <div class="aside-1 general__area-1">
            <ul class="aside-1__index-search-list">
                <li class="aside-1__index-search-item">
                    <a class="aside-1__index-search-link" href="#"></a>
                </li>
            </ul><!--aside-1__index-search-list-->
        </div><!--aside-1-->






        <!----- CONTENT ----->
        <div class="main general__area-1">
            <h2 class="main__h2">7 Области видимости</h2>
            <div class="main__wrapper">

                <!----- Области видимости ----->
                <a name="SCOPE"></a>
                <div class="main__title-1">Области видимости</div>
                <p class="main__p note">
                    Область видимости определяет границы действия переменной.
                </p>

                <p class="main__subtitle-1">
                    Глобальная область видимости
                </p>
                <p class="main__p">
                    В глобальной области видимости определены такие переменные как, window и global. Это глобальные
                    объекты. Вы также можете определять новые переменные в глобальной области видимости. Если вы
                    открываете консоль веб-браузера и пишите там const = a, то вы создаете переменную <span
                        class="strong">a</span> в глобальной области видимости веб-браузера.
                </p>

                <p class="main__subtitle-1">
                    Локальные области видимости
                </p>
                <p class="main__p">
                    Вы можете создавать локальные области видимости и создавать в них переменные. Предположим, что
                    есть локальная область 1 и в ней созданы переменные <span class="strong">a</span> и <span
                        class="strong">c</span>
                </p>
                <p class="main__p">
                    Так же предположим, что есть локальная область 2 и в ней создана переменная <span
                        class="strong">b</span>
                </p>
                <p class="main__p">
                    Обратите внимание, что в локальных областях видимости 1 и 2 некоторые переменные перескаются с
                    переменными, которые созданы в глобальной области видимости. Допустим в локальной области 1 есть
                    переменная с именем <span class="strong">a</span>, и переменная с таким же именем есть в глобальной
                    области видимости. То же самое касается переменной <span class="strong">b</span>, которая определена
                    в локальной области видимости 2, и переменная с таким же именем есть в глобальной области видимости,
                    но это не такая же переменная, но переменная с таким же именем. Почему этот нюанс важен?
                </p>
                <p class="main__p">Этот нюанс важен потому, что переменная <span class="strong">b</span> в локальной
                    области 2 и переменная <span class="strong">b</span> в глобальной области видимости, 2 разные
                    переменные.
                </p>
                <p class="main__p">
                    И если вы определяете переменную <span class="strong">b</span> в локальной области 2, и далее
                    пытаетесь получить доступ к значению этой переменной (допустим прочитать значение или изменить его,
                    то вы будете работать с переменной созданной объявленной в локальной области видимости 2, не с
                    переменной <span class="strong">b</span> из глобальной области видимости.
                </p>
                <p class="main__p">
                    Но если в локальной области видимости 1, например, вы попытаетесь получить доступ к переменной <span
                        class="strong">b</span> , которая не объявлена внутри этой области, то будет использоваться
                    переменная объявленная в глобальной области видимости.
                </p>
                <p class="main__subtitle-1">Папка 01. Посмотрим пример</p>
                <pre>
                    <code>
                        let a
                        let b
                        
                        function myFn() {
                            let b
                            a = true
                            b = 10
                            console.log(b) // 10
                        }
                        
                        myFn() 
                        
                        console.log(a) // true 
                        console.log(b) // undefined 
                    </code>
                </pre>
                <p class="main__p">
                    Мы объявили переменные <span class="strong">a</span> и <span class="strong">b</span> ,
                    используя ключевое слово let, и допустим мы сделали это в глобальной области видимости. Предположим,
                    что мы скопировали этот код, вставили в консоль веб-браузера и выполнили его там. Тем самым мы
                    создали эти переменныые наряду с переменной window глобальной области видимости.
                </p>
                <p class="main__p">
                    Кроме того, в этом примере мы объявили функцию myFn также в глобальной области видимости. И теперь у
                    нас будет доступна переменная с названием myFn в глобальной области видимости. Далее мы вызываем
                    функцию myFn, и теперь давайте посмотрим что же у нас происходит внутри функции.
                </p>
                <p class="main__p">
                    Внутри функции создается локальная область видимости функции. И такая область видимости создается
                    каждый раз когда мы вызываем функцию. И именно в этой области видимости функции объявляется например
                    переменная <span class="strong">b</span> с помощью ключевого let. И если мы попытаемся получить
                    доступ к переменной <span class="strong">b</span> , то мы будем получать доступ к этой переменной
                    <span class="strong">b</span> , объявленной в области видимости функции, а не к переменной
                    <span class="strong">b</span> , объявленной в глобальной области видимости.
                </p>






                <!----- Цепочка областей видимости ----->
                <a name="SCOPE_CHAIN"></a>
                <div class="main__title-1">Цепочка областей видимости</div>
                <p class="main__subtitle-1">
                    Папка 01. Посмотрим что же происходит когда мы пытаемся получить доступ к переменной <span
                        class="strong">a</span> внутри функции myFn
                </p>
                <pre>
                    <code>
                        const a = 5

                        function myFn() { 
                            function innerFn() { // объявление функции
                                console.log(a) // 5
                            }
                            innerFn() // вызов функции
                        }

                        myFn()
                    </code>
                </pre>
                <p class="main__p">
                    У нас есть переменная <span class="strong">a</span> , объявленная в глобальной области видимости.
                    Предполагаем, что этот код мы просто запускаем в консоли браузера. Также мы объявили функцию,
                    которая называется myFn. Это создание переменной myFn, и значением этой переменной будет функция.
                    Внутри функции myFn мы объявили еще одну функцию, она называется innerFn. И каждый раз, когда будет
                    вызываться функция myFn, внутри нее будет объявляться новая переменная, которая называется innerFn,
                    и значением ее будет функция, которая выводит в консоль значение переменной <span
                        class="strong">a</span>.
                </p>
                <p class="main__p">
                    После объявления функции innerFn, в функции myFn мы вызываем функцию innerFn, и делаем это внутри
                    функции myFn.
                </p>
                <p class="main__p">
                    Что будет, если мы вызывем функцию innerFn в самом низу примера кода, возле вызова функции myFn?
                    Мы получим ошибку - переменная не определена. Почему? Потому что мы объявили функцию innerFn внутри
                    функции myFn. То есть переменной innerFn нет в глобальной области видимости. Потому мы можем
                    вызывать ее только внутри функции myFn. Что мы и делаем в этом примере кода.
                </p>
                <p class="main__p">
                    Получается следующее. В самом низу примера кода мы вызываем функцию myFn, эта функция доступна,
                    потому что мы объявили ее в глобальной области видимости. Далее после вызова функции myFn создается
                    область видимости функции myFn, и в этой области видимости создается переменная innerFn. И далее мы
                    вызываем функцию innerFn, после этого вызова создается новая область видимости, область видимости
                    функции innerFn, и уже в этой области видимости находится выражение console.log(a)
                </p>
                <p class="main__p">
                    То есть по сути, есть глобальная область видимости, дальше создается область видимости функции myFn,
                    и внутри нее создается область видимости функции innerFn. То есть получается создается цепочка
                    областей видимости.
                </p>
                <p class="main__p">
                    И что происходит? Внутри функции innerFn мы пытаемся вывести в консоль значение переменной <span
                        class="strong">a</span>. Сначала мы пытаемся найти такую переменную в локальной области
                    видимости (область видимости innerFn), но там такой переменной нет, потому что такая переменная не
                    была объявлена в области видимости функции innerFn.
                </p>
                <p class="main__p">
                    Соответственно мы идем дальше и пытаемся найти такую переменную во внешней области видимости. А для
                    функции innerFn такая внешняя область видимости это функция myFn, область видимости этой функции.
                    Почему? Потому что мы вызвали функцию innerFn внутри функции myFn.
                </p>

                <p class="main__p">
                    В области видимости функции myFn переменной <span class="strong">a</span> тоже нет, потому что мы ее
                    не объявляли внутри этой переменной, также нет и параметра с таким именем(круглые скобки пустые).
                    Следовательно мы идем еще выше, мы идем и смотрим, есть ли переменная <span class="strong">a</span>
                    в глобальной области видимости. И в данном примере такая переменная здесь есть - const a.
                </p>
                <p class="main__p">
                    Таким образом мы нашли в итоге переменную <span class="strong">a</span>. И значение этой переменной
                    5. Выведем в консоль этот пример кода и должны получить 5. Но почему мы видим также undefined? То
                    что было возвращено интерпретаором JavaScript. Это результат вызова функции myFn.
                </p>
                <p class="main__p">
                    Функция myFn не имеет ключевого слова return, потому такая функция по умолчанию возвращает
                    undefined.
                </p>





                <!----- Жизненный цикл переменных ----->
                <a name="VARIABLE_LIFE_CYCLE"></a>
                <div class="main__title-1">Жизненный цикл переменных</div>
                <p class="main__subtitle-1">
                    Папка 01. Жизненный цикл переменной <span class="strong">b</span>
                </p>
                <pre>
                    <code>
                        let a 
                        let b
                        
                        function myFn() {
                            let b
                            a = true
                            b = 10
                            console.log(b) // 10
                        }
                        
                        myFn()
                        
                        console.log(a) // true
                        console.log(b) // undefined    
                    </code>
                </pre>

                <p class="main__p">
                    Рассмотрим шаг за шагом что-же происходит с переменной <span class="strong">b</span>
                </p>
                <p class="main__p">
                    1) Переменная <span class="strong">b</span> объявляется в глобальной области видимости. И так как мы
                    не присваиваем ей начальное значение, ее значение будет undefined.
                </p>
                <p class="main__p">
                    2) Мы вызываем функцию myFn. До того как эта функция вызвана, она была объявлена в глобальной
                    области видимости. После вызова функции внутри нее создается область видимости, область видимости
                    функции myFn. При чем каждый, раз когда вызывается одна и та жа функция, создаются новые области
                    видимости для каждого вызова функции.
                </p>
                <p class="main__p">
                    3) Так вот в этой области видимости функции myFn объявляется переменная <span
                        class="strong">b</span>.

                </p>
                <p class="main__p">
                    4) На строке где написано b = 10 мы должны найти переменную <span class="strong">b</span>. И конечно
                    же сначала мы ищем, объявлина ли эта переменная в рамках функции, то есть в области видимости
                    функции. Ответ да - объявлена. Следовательно мы берем переменную, которая находится в области
                    видимости функции, и присваиваем ей значение 10.
                </p>
                <p class="main__p">
                    5) Мы хотим вывести значение переменной в консоль. И это делается в функции. И здесь мы снова
                    пытаемся найти переменную <span class="strong">b</span>, и мы находим ее в зоне области видимости
                    функции. В этой переменной есть значение 10, которое мы присвоили ей на предыдущей строке.
                    Следовательно в консоль выведется 10.
                </p>
                <p class="main__p">
                    6) После этого функция myFn завершает свою работу, она возвращает undefined, это результат вызова
                    функции myFn. Здесь нет инструкции return, а мы помним что, если нет в функции инструкции return, то
                    функция всегда возвращает undefined. Этот результат мы никуда не выводим, мы просто вызываем функцию
                    myFn. И дальше мы печатаем в консоль значение переменных <span class="strong">a</span> и <span
                        class="strong">b</span>. На этом этапе мы пытаемся найти переменную в глобальной области
                    видимости. Почему так происходит? Потому что эта команда вывода в консоль console.log(b) находится в
                    глобальной области видимости.
                </p>
                <p class="main__p">
                    Переменная <span class="strong">b</span> в глобальной области видимости имеет значение undefined,
                    потому что в глобальной области ей нигде не было присвоено какое-либо значение.
                </p>

                <p class="main__p note">А вот переменная <span class="strong">b</span> в области видимости функции давно
                    была уже удалена. Почему? Потому что мы вызвали функцию myFn, она выполнила свою работу и все
                    переменные уничтожились. Все те переменные, которые находились в области видимости функции myFn.</p>
                <p class="main__p">
                    И мы рассмотрели жизненный цикл переменной <span class="strong">b</span>
                </p>

                <p class="main__subtitle-1">
                    Жизненный цикл переменной <span class="strong">a</span>
                </p>
                <pre>
                    <code>
                        let a 
                        let b
                        
                        function myFn() {
                            let b
                            a = true
                            b = 10
                            console.log(b) // 10
                        }
                        
                        myFn()
                        
                        console.log(a) // true
                        console.log(b) // undefined    
                    </code>
                </pre>
                <p class="main__p">
                    1) Переменная <span class="strong">a</span> объявляется в глобальной области видимости, и ее
                    значение undefined.
                </p>
                <p class="main__p">
                    2) Мы вызываем функцию myFn, которая объявлена в глобальной области видимости.
                </p>
                <p class="main__p">
                    3) В функции myFn на этапе, где есть строка a = true, мы хотим присвоить знаяение true переменной
                    <span class="strong">a</span>. И конечно же мы пытаемся сначала найти переменную с таким именем в
                    области видимости функции. Но в области видимости функции myFn такая переменная не была объявлена. И
                    у функции нет и параметра с таким именем. Следовательно, мы пытаемся найти такую переменную во
                    внешней области видимости. Объявлена ли <span class="strong">a</span> в зоне видимости функции?
                    Ответ - нет. Объявлена ли <span class="strong">a</span> во внешней зоне видимости?
                    Ответ - да.
                </p>
                <p class="main__p note">
                    А почему мы ищем <span class="strong">a</span> в глобальной области видимости? Потому что вызов
                    функции myFn находится в глобальной области видимости. На ряду с объявлением переменных <span
                        class="strong">a</span> и <span class="strong">b</span>
                </p>
                <p class="main__p">
                    Итак после того как мы нашли переменную <span class="strong">a</span>, (мы нашли ее в глобальной
                    области видимости), мы присваиваем этой переменной значение true. Следовательно, после этого
                    выражения глобальная переменная <span class="strong">a</span>, будет иметь значение true. То есть
                    изнутри функции, только что, мы присвоили значение глобальной переменной.
                </p>

                <p class="main__p">
                    4) На этом шаге, при вызове в консоль console.log(a) в самом низу примера кода, после того как
                    функция myFn выполнила свою работу, вернула undefined, все локальные переменные внутри функции myFn
                    удалились, а там была переменная <span class="strong">b</span>, которую мы декларировали.

                </p>
                <p class="main__p">
                    Следовательно, после этого, когда мы пытаемся получить доступ к переменной <span
                        class="strong">a</span> в вызове console.log(a), мы находим переменную c таким именем в
                    глобальной области видимости, но при этом значение этой переменной уже не undefined, как это было
                    изначально, на 1-ом шаге, а значение ее - true. И это значение мы присвоили с помощью оператора
                    присваивания внутри функции myFn, в момент вызова функции myFn.
                </p>
                <p class="main__p">
                    Следовательно на шаге 4) переменная <span class="strong">a</span> имеет значение true.
                </p>

                <p class="main__p note">
                    Получается, что внутри функции myFn мы изменили глобальную переменную.
                </p>
                <p class="main__p danger">
                    Но внутри функции крайне не рекомендуется менять значение внешних переменных!
                </p>
                <p class="main__p">
                    И мы в этом примере кода нарушили такое правило.
                </p>
                <p class="main__p">
                    Так вот чтобы избежать этого, внутри функции нужно объявлять новые переменные, как это сделано в
                    этом примере с переменной <span class="strong">b</span>.
                </p>







                <!----- Типы областей видимости ----->
                <a name="SCOPE_TYPES"></a>
                <div class="main__title-1">Типы областей видимости</div>
                <p class="main__p">
                    Существует: Глобальная область видимости, Область видимомсти функции, Область видимости блока.
                </p>
                <p class="main__subtitle-1">
                    Область видимости внутри блока
                </p>
                <p class="main__p">
                    Переменные, объявленные с помощью let или const внутри блока, имеют область видимости, которая
                    ограничена этим блоком. Что такое блок в JavaScript? Блок - это любой код, который находится между
                    фигурными скобками. Например, тело функции это тоже блок. И те переменные, которые объявлены внутри
                    такого блока, привязаны к области видимости этого самого блока.
                </p>
                <p class="main__p">
                    Кроме того, блоки в JavaScript используются в таких конструкциях, как, if, else if, а также в
                    различных циклах типа for. Это тоже блоки, с областями видимости.
                </p>
                <p class="main__subtitle-1">
                    Папка 01. Рассмотрим пример
                </p>
                <pre>
                    <code>
                        function myFn() {
                            a = true
                            console.log(a)  // true
                        }
                        
                        myFn()
                        
                        console.log(a) // true
                    </code>
                </pre>
                <p class="main__p">
                    Объявлена функция myFn. Внутри этой функции мы присваиваем значение true переменной <span
                        class="strong">a</span>. Но такой переменной нет, ни в области видимости функции, ни в
                    глобальной области видимости - где мы и вызали функцию myFn. И поэтому мы не находим эту переменную
                    нигде. Это называется - Попытка присвоить значение не объявленной переменной.
                </p>
                <p class="main__p">
                    Но при выполнении такого кода в веб-браузере вы ошибки не получите. Потому, что переменная <span
                        class="strong">a</span>, будет объявлена автоматически, при чем это будет сделано в глобальной
                    области видимости. И тем самым, после завершения выполнения функции myFn, после этапа вызова
                    функции, когда мы попытаемся получить доступ к переменной в console.log(a) в глобальной области
                    видимости, мы получим значение true.
                </p>
                <p class="main__p">
                    Это то значение, которое было присвоено переменной, в результате автоматического его создания в
                    глобальной области видимости, после того как эта переменная не была найдена нигде.
                </p>
                <p class="main__p danger">Так делать крайне не рекомендуется! Не рекомендуется присваивать какие-то
                    значения переменным, которые не были объявлены ранее. Потому, что такие переменные будут созданы
                    автоматически с помощью JavaScript в глобальной области видимости.
                </p>

                <p class="main__subtitle-1">
                    Правила работы с переменными
                </p>
                <ul class="main__list">
                    <li class="main__list-item">Все переменные объявлять перед их использованием.</li>
                    <li class="main__list-item">Стараться использовать const, где это возможно, а уже потом использовать
                        let, это в том случае, если вы планируете присваивать новые значения переменным.</li>
                    <li class="main__list-item">Внутри функции не изменять переменные с внешних областей функции. Для
                        того чтобы достичь этого необходимо внутри функции объявлять те переменные, с которыми вы будете
                        работать именно внутри этой функции. Параметры функции - это тоже переменные, которые получают
                        значение в момент вызова функции.
                    </li>
                </ul>







                <!----- Строгий режим ----->
                <a name="STRICT_REGIME"></a>
                <div class="main__title-1">Строгий режим</div>
                <p class="main__p">
                    Строгий режим(strict mode) - это инструкция интерпретатору JavaScript анализировать ваш код более
                    пристально. Для того чтобы этот режим работал, нужно написать вот эту строку 'use strict' в начале
                    программы. В самом верху перед кодом JavaScript. Это просто выражение, как и любая строка.
                </p>
                <p class="main__p">
                    Такой строгий режим позволяет избегать автоматического создания переменных, в результате их
                    ненахождения. Вместо создания переменной JavaScript выдаст ошибку - Uncaught ReferenceError: a is
                    not defined at myFn. Также можно располагать эту строку строго режима в рамках функции, чтобы его
                    действие распространялось только на область функции.
                </p>
                <p class="main__subtitle-1">
                    Примеры объявления строгого режима
                </p>
                <p class="main__p">
                    Строгий режим в глобальной области видимости:
                </p>
                <pre>
                    <code>
                        'use strict' // строгий режим в глобальной области видимости 
                        function myFn() {
                            a = true
                            console.log(a)  // true
                        }
                        
                        myFn()
                        
                        console.log(a) // true
                    </code>
                </pre>

                <p class="main__p">
                    Строгий режим в области видимости функции:
                </p>
                <pre>
                    <code>
                        function myFn() {
                            'use strict' // строгий режим в области видимости функции
                            a = true
                            console.log(a)  // true
                        }
                        
                        myFn()
                        
                        console.log(a) // true 
                    </code>
                </pre>










            </div><!---------------main__wrapper--------------->
        </div><!--------------------main-------------------->






        <!----- ASIDE-2 ----->
        <div class="wrapper__aside-2">
            <div class="aside-2 general__area-1">
                <ul class="aside-2__index-search-list">
                    <li class="aside-2__index-search-item">
                        <a class="aside-2__index-search-link" href="#SCOPE">Области видимости</a>
                    </li>
                    <li class="aside-2__index-search-item">
                        <a class="aside-2__index-search-link" href="#SCOPE_CHAIN">Цепочка областей видимости</a>
                    </li>
                    <li class="aside-2__index-search-item">
                        <a class="aside-2__index-search-link" href="#VARIABLE_LIFE_CYCLE">Жизненный цикл переменных</a>
                    </li>
                    <li class="aside-2__index-search-item">
                        <a class="aside-2__index-search-link" href="#SCOPE_TYPES">Типы областей видимости</a>
                    </li>
                    <li class="aside-2__index-search-item">
                        <a class="aside-2__index-search-link" href="#STRICT_REGIME">Строгий режим</a>
                    </li>
                </ul>
            </div><!--aside_2-->
        </div>







        <!----- FOOTER ----->
        <a name="FOOTER"></a>
        <div class="footer general__area-1">Footer</div>
    </div><!--wrapper-->



</body>

</html>